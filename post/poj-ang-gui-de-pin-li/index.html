<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>POJ 昂贵的聘礼 | Gridea</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://clyzwangyuyang.github.io/favicon.ico?v=1582982265583">
<link rel="stylesheet" href="https://clyzwangyuyang.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="Description:
年轻的探险家来到了一个印第安部落里。
在那里他和酋长的女儿相爱了，于是便向酋长去求亲。
酋长要他用10000个金币作为聘礼才答应把女儿嫁给他。
探险家拿不出这么多金币，便请求酋长降低要求。
酋长说：”嗯，如果你能够..." />
    <meta name="keywords" content="最短路" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://clyzwangyuyang.github.io">
        <img src="https://clyzwangyuyang.github.io/images/avatar.png?v=1582982265583" class="site-logo">
        <h1 class="site-title">Gridea</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      书是我最好的朋友。
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://clyzwangyuyang.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">POJ 昂贵的聘礼</h2>
            <div class="post-date">2020-02-28</div>
            
            <div class="post-content" v-pre>
              <h2 id="description">Description:</h2>
<p>年轻的探险家来到了一个印第安部落里。</p>
<p>在那里他和酋长的女儿相爱了，于是便向酋长去求亲。</p>
<p>酋长要他用10000个金币作为聘礼才答应把女儿嫁给他。</p>
<p>探险家拿不出这么多金币，便请求酋长降低要求。</p>
<p>酋长说：”嗯，如果你能够替我弄到大祭司的皮袄，我可以只要8000金币。如果你能够弄来他的水晶球，那么只要5000金币就行了。”</p>
<p>探险家就跑到大祭司那里，向他要求皮袄或水晶球，大祭司要他用金币来换，或者替他弄来其他的东西，他可以降低价格。</p>
<p>探险家于是又跑到其他地方，其他人也提出了类似的要求，或者直接用金币换，或者找到其他东西就可以降低价格。</p>
<p>不过探险家没必要用多样东西去换一样东西，因为不会得到更低的价格。</p>
<p>探险家现在很需要你的帮忙，让他用最少的金币娶到自己的心上人。</p>
<p>另外他要告诉你的是，在这个部落里，等级观念十分森严。</p>
<p>地位差距超过一定限制的两个人之间不会进行任何形式的直接接触，包括交易。</p>
<p>他是一个外来人，所以可以不受这些限制。</p>
<p>但是如果他和某个地位较低的人进行了交易，地位较高的的人不会再和他交易，他们认为这样等于是间接接触，反过来也一样。</p>
<p>因此你需要在考虑所有的情况以后给他提供一个最好的方案。</p>
<p>为了方便起见，我们把所有的物品从1开始进行编号，酋长的允诺也看作一个物品，并且编号总是1。</p>
<p>每个物品都有对应的价格P，主人的地位等级L，以及一系列的替代品Ti和该替代品所对应的”优惠”Vi。</p>
<p>如果两人地位等级差距超过了M，就不能”间接交易”。</p>
<p>你必须根据这些数据来计算出探险家最少需要多少金币才能娶到酋长的女儿。</p>
<p>输入格式<br>
输入第一行是两个整数M，N，依次表示地位等级差距限制和物品的总数。</p>
<p>接下来按照编号从小到大依次给出了N个物品的描述。</p>
<p>每个物品的描述开头是三个非负整数P、L、X，依次表示该物品的价格、主人的地位等级和替代品总数。</p>
<p>接下来X行每行包括两个整数T和V，分别表示替代品的编号和”优惠价格”。</p>
<p>输出格式<br>
输出最少需要的金币数。</p>
<p>数据范围:<br>
1≤N≤100,<br>
1≤P≤10000,<br>
1≤L,M≤ N,<br>
0≤X&lt; N</p>
<h2 id="analyz">Analyz:</h2>
<p>题目中最关键的信息就是，一个物品可以用其他物品来替代，那么转化一下，就变成：如果Ａ可以用Ｂ来替代，那么就连一条从B到A的有向边。最后，建立一个超级源点，从源点向每个点连一条有向边,权值为直接购买该商品的价格。那么最终的答案为从超级源点到一号点的最短路, 复杂度为O(N^2 ), 最朴素的 djkstra。但是题目中还有一个等级差距限制，我们发现M的范围比较小，可以直接暴力枚举等级交易区间，就是只跟等级区间在[L,R]中的人交易，复杂度为O( N^2 )，总复杂度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>N</mi><mn>4</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(N^4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>.</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;vector&gt;

using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 100 + 10, INF = 1e9 + 7;
int m, n;
int g[N][N], grade[N], dis[N];
bool vis[N];
vector&lt;PII&gt; vec[N];//替代品的编号 , 优惠价格 

void Build()
{
	for(int i = 1; i &lt;= n; i ++) {
		for(int j = 0, sz = vec[i].size(); j &lt; sz; j ++) {
			int v = vec[i][j].first, w = vec[i][j].second;
			g[v][i] = w;
		}
	}
}

int Dijkstra(int l, int r)
{
	memset(vis, 0, sizeof(vis));
	memset(dis, 0x3f, sizeof(dis));
	dis[0] = 0;
	for(int i = 1; i &lt;= n; i ++) {
		int x = n + 1;
		for(int j = 0; j &lt;= n; j ++) 
		    if( !vis[j] &amp;&amp; ( x == n + 1 || dis[j] &lt; dis[x])) x = j;
        vis[x] = true;
        for(int y = 1; y &lt;= n; y ++)
        	if( dis[y] &gt; dis[x] + g[x][y] &amp;&amp; grade[y] &gt;= l &amp;&amp; grade[y] &lt;= r)
        	    dis[y] =  dis[x] + g[x][y];
	}
	return dis[1];
}

int main()
{
	scanf(&quot;%d%d&quot;, &amp;m, &amp;n);
	memset(g, 0x3f, sizeof(g));
	for(int i = 1; i &lt;= n; i ++) {
		int w, cnt;
		scanf(&quot;%d%d%d&quot;, &amp;w, &amp;grade[i], &amp;cnt);
		g[0][i] = w;
		while(cnt --) {
			int p;
			scanf(&quot;%d%d&quot;, &amp;p, &amp;w);
			vec[i].push_back(make_pair(p, w));
		}
	}
	Build();//建图 
	int res = INF;
	for(int i = 1; i &lt;= n; i ++) {
		for(int j = i; j &lt;= n &amp;&amp; j - i &lt;= m; j ++)
		    res = min( Dijkstra(i, j), res);
	}
	printf(&quot;%d\n&quot;, res);
	return 0;
} 

</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://clyzwangyuyang.github.io/tag/VeldUG3IV/" class="tag">
                    最短路
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://clyzwangyuyang.github.io/post/oi-shua-ti-ji-hua/">
                  <h3 class="post-title">
                    OI刷题计划
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
